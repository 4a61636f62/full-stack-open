(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(2),i=t(4),u=t.n(i),d="/api/persons",l={getAll:function(){return u.a.get(d).then((function(e){return e.data}))},add:function(e){return u.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return u.a.put("".concat(d,"/").concat(n),e).then((function(e){return e.data}))},_delete:function(e){return u.a.delete("".concat(d,"/").concat(e))}},s=t(0),b=function(e){var n=e.filter,t=e.handleChange;return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})},j=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r}),Object(s.jsx)("br",{}),"number: ",Object(s.jsx)("input",{value:c,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.persons,t=e.handleDelete;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Numbers"}),n.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:[e.name," ",e.number]}),Object(s.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.id)}))]})},h=function(e){var n=e.notification;if(null===n)return null;var t={color:n.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(s.jsx)("div",{style:t,children:n.message})},m=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),i=Object(a.a)(r,2),u=i[0],d=i[1],m=Object(o.useState)(""),O=Object(a.a)(m,2),p=O[0],v=O[1],g=Object(o.useState)(""),x=Object(a.a)(g,2),w=x[0],C=x[1],k=Object(o.useState)(null),N=Object(a.a)(k,2),y=N[0],S=N[1];Object(o.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var A=function(e,n){S({message:e,color:n}),setTimeout((function(){S(null)}),5e3)},D=function(e){if(window.confirm("update ".concat(e.name,"'s number to ").concat(p,"?"))){var n={name:e.name,number:p};l.update(n,e.id).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n}))),A("Updated ".concat(n.name))})).catch((function(){A("".concat(e.name," was already deleted from phonebook"),"red"),c(t.filter((function(n){return n.id!==e.id})))}))}};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{notification:y}),Object(s.jsx)(b,{filter:w,handleChange:function(e){return C(e.target.value)}}),Object(s.jsx)(j,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===u}));if(n)D(n);else{var r={name:u,number:p};l.add(r).then((function(e){c(t.concat(e)),A("Added ".concat(r.name),"green")}))}},newName:u,newNumber:p,handleNameChange:function(e){return d(e.target.value)},handleNumberChange:function(e){return v(e.target.value)}}),Object(s.jsx)(f,{persons:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),handleDelete:function(e){window.confirm("do you want to delete ".concat(e.name," from phonebook?"))&&(l._delete(e.id).then((function(){})).catch((function(){A("".concat(e.name," was already deleted from phonebook"),"red")})),c(t.filter((function(n){return n.id!==e.id}))))}})]})};r.a.render(Object(s.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9c95b589.chunk.js.map