(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),o=t(3),a=t(2),u=t(4),i=t.n(u),d="/api/persons",s={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},add:function(e){return i.a.post(d,e).then((function(e){return e.data})).catch((function(e){throw new Error(e.response.data.error)}))},update:function(e,n){return i.a.put("".concat(d,"/").concat(n),e).then((function(e){return e.data})).catch((function(e){throw 404===e.response.status?new Error("Not Found"):new Error(e.response.data.error)}))},_delete:function(e){return i.a.delete("".concat(d,"/").concat(e))}},l=t(0),b=function(e){var n=e.filter,t=e.handleChange;return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,c=e.handleNameChange,o=e.handleNumberChange;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c}),Object(l.jsx)("br",{}),"number: ",Object(l.jsx)("input",{value:r,onChange:o})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.persons,t=e.handleDelete;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Numbers"}),n.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("label",{children:[e.name," ",e.number]}),Object(l.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.id)}))]})},j=function(e){var n=e.notification;if(null===n)return null;var t={color:n.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(l.jsx)("div",{style:t,children:n.message})},m=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),i=u[0],d=u[1],m=Object(a.useState)(""),O=Object(o.a)(m,2),p=O[0],g=O[1],v=Object(a.useState)(""),x=Object(o.a)(v,2),w=x[0],C=x[1],N=Object(a.useState)(null),k=Object(o.a)(N,2),y=k[0],S=k[1];Object(a.useEffect)((function(){s.getAll().then((function(e){r(e)}))}),[]);var E=function(e,n){S({message:e,color:n}),setTimeout((function(){S(null)}),5e3)},A=function(e){if(window.confirm("update ".concat(e.name,"'s number to ").concat(p,"?"))){var n={number:p};s.update(n,e.id).then((function(n){r(t.map((function(t){return t.id!==e.id?t:n}))),E("Updated ".concat(n.name),"green")})).catch((function(n){"Not Found"===n.message?(E("".concat(e.name," was already deleted from phonebook"),"red"),r(t.filter((function(n){return n.id!==e.id})))):E(n.message,"red")}))}};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(j,{notification:y}),Object(l.jsx)(b,{filter:w,handleChange:function(e){return C(e.target.value)}}),Object(l.jsx)(h,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===i}));if(n)A(n);else{var c={name:i,number:p};s.add(c).then((function(e){r(t.concat(e)),E("Added ".concat(c.name),"green")})).catch((function(e){E(e.message,"red")}))}},newName:i,newNumber:p,handleNameChange:function(e){return d(e.target.value)},handleNumberChange:function(e){return g(e.target.value)}}),Object(l.jsx)(f,{persons:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),handleDelete:function(e){window.confirm("do you want to delete ".concat(e.name," from phonebook?"))&&(s._delete(e.id).then((function(){})).catch((function(){E("".concat(e.name," was already deleted from phonebook"),"red")})),r(t.filter((function(n){return n.id!==e.id}))))}})]})};c.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2beabc67.chunk.js.map